spring:
  application:
    name: position-loader
  
  datasource:
    url: jdbc:postgresql://localhost:5432/positionloader
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  
  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      auto-offset-reset: earliest
      group-id: position-loader
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer

  cache:
    type: caffeine

# Position Loader Configuration
loader:
  batch-size: 1000
  processing-threads: 4
  dlq-retention-days: 7
  dlq-max-retries: 3
  dlq-retry-interval-ms: 300000
  
  rate-limit:
    max-concurrent: 20
    requests-per-second: 100
  
  alerting:
    dlq-threshold: 100
    email-enabled: false
    email-recipients: null
  
  consumer-lag:
    check-interval-ms: 30000
    alert-threshold: 10000
  
  mspm:
    base-url: http://localhost:8081
    timeout: 30s
  
  retry:
    max-attempts: 3
    initial-delay: 1s
    max-delay: 30s
    multiplier: 2.0
  
  feature-flags:
    eod-processing-enabled: true
    intraday-processing-enabled: true
    validation-enabled: true
    duplicate-detection-enabled: true
    reconciliation-enabled: true
    archival-enabled: true
    disabled-accounts: []
    pilot-accounts: []
  
  validation:
    enabled: true
    reject-zero-quantity: true
    max-price-threshold: 1000000
  
  archival:
    enabled: true
    retention-days: 180
    cron-schedule: "0 0 2 * * SUN"
  
  kafka:
    batch-size: 100
    poll-timeout-ms: 5000

# Actuator endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true

# Logging
logging:
  level:
    root: INFO
    com.vyshali.positionloader: DEBUG
    org.springframework.kafka: WARN
    org.apache.kafka: WARN

# Server
server:
  port: 8080
